#pragma once
#include <Undaunted\eternal.hpp>
#include "versiondb.h"

#ifndef Offsetsdef
#define Offsetsdef
namespace Offsets {
	// Generated code from code_gen/gen_addrmap
	constexpr const auto addrMap = mapbox::eternal::map<uintptr_t, uintptr_t>({
		{ 0x00000000, 0 },
		{ 0x000F9E90, 10979 },
		{ 0x00101A30, 11213 },
		{ 0x00101CC0, 11216 },
		{ 0x0010CC40, 11452 },
		{ 0x00111420, 11508 },
		{ 0x001320F0, 12193 },
		{ 0x001328A0, 12203 },
		{ 0x001329D0, 12204 },
		{ 0x0013C740, 12626 },
		{ 0x0013C870, 12628 },
		{ 0x0014CC20, 13007 },
		{ 0x001652D0, 13530 },
		{ 0x001713D0, 13657 },
		{ 0x00177DC0, 13805 },
		{ 0x00181800, 14000 },
		{ 0x00186790, 14108 },
		{ 0x00190480, 14399 },
		{ 0x00194230, 14461 },
		{ 0x0019C3B0, 14678 },
		{ 0x0019CE40, 14693 },
		{ 0x001A1730, 14809 },
		{ 0x001C60A0, 15491 },
		{ 0x001C61A0, 15494 },
		{ 0x001D2050, 0 },
		{ 0x001D66E0, 15757 },
		{ 0x001D6860, 15758 },
		{ 0x001D73C0, 15780 },
		{ 0x001D7510, 15781 },
		{ 0x001ECC60, 15907 },
		{ 0x001ECE20, 15909 },
		{ 0x001F5390, 16084 },
		{ 0x001F5750, 16089 },
		{ 0x0026D510, 18662 },
		{ 0x0028CC60, 19238 },
		{ 0x002961F0, 19354 },
		{ 0x00299750, 19389 },
		{ 0x0029A330, 19400 },
		{ 0x002A6FF0, 19807 },
		{ 0x002C5300, 20469 },
		{ 0x002C53D0, 20470 },
		{ 0x002C5570, 20471 },
		{ 0x002E8400, 21425 },
		{ 0x003104D0, 22315 },
		{ 0x00325F00, 22825 },
		{ 0x003315F0, 23150 },
		{ 0x00331620, 23151 },
		{ 0x00331650, 23152 },
		{ 0x00333B30, 23241 },
		{ 0x00345ED0, 23624 },
		{ 0x003512A0, 23922 },
		{ 0x00360480, 24206 },
		{ 0x003606D0, 24207 },
		{ 0x00365BF0, 24246 },
		{ 0x00368A20, 24274 },
		{ 0x00368B30, 24275 },
		{ 0x00368BC0, 24276 },
		{ 0x00370910, 24481 },
		{ 0x00375050, 24523 },
		{ 0x003C38E0, 25977 },
		{ 0x003C3F00, 25980 },
		{ 0x003D2380, 26254 },
		{ 0x003D2A60, 26259 },
		{ 0x003D4070, 26291 },
		{ 0x003D4150, 26293 },
		{ 0x003D4630, 26300 },
		{ 0x003D47C0, 26302 },
		{ 0x003D4D80, 26311 },
		{ 0x003D4F90, 26312 },
		{ 0x003D7860, 26349 },
		{ 0x003D90E0, 26412 },
		{ 0x003DB420, 26454 },
		{ 0x003DBDA0, 26458 },
		{ 0x003DC3C0, 26468 },
		{ 0x003DC720, 26472 },
		{ 0x003DC7E0, 26473 },
		{ 0x003E1450, 26570 },
		{ 0x00423B70, 28367 },
		{ 0x004503E0, 0 },
		{ 0x00475AA0, 0 },
		{ 0x004F5C80, 32290 },
		{ 0x0056B600, 34381 },
		{ 0x0057CCC0, 34676 },
		{ 0x0057D1A0, 34677 },
		{ 0x00586D70, 34817 },
		{ 0x00586DE0, 34818 },
		{ 0x00587350, 34819 },
		{ 0x00589A60, 34862 },
		{ 0x0059F0F0, 35263 },
		{ 0x0059F190, 35264 },
		{ 0x0059F230, 35265 },
		{ 0x0059F2E0, 35266 },
		{ 0x0059F6E0, 35269 },
		{ 0x005C1BE0, 35916 },
		{ 0x005C6BF0, 36012 },
		{ 0x005D62E0, 36344 },
		{ 0x005DB310, 36407 },
		{ 0x005E7E40, 36537 },
		{ 0x005F9E30, 36690 },
		{ 0x00607680, 36901 },
		{ 0x00631360, 37802 },
		{ 0x006313D0, 37803 },
		{ 0x00637A80, 37938 },
		{ 0x00638190, 37945 },
		{ 0x00650DF0, 38404 },
		{ 0x0065C880, 38568 },
		{ 0x0067E3B0, 38867 },
		{ 0x0068A0F0, 0 },
		{ 0x00692CD0, 39175 },
		{ 0x00693050, 39179 },
		{ 0x00693110, 39181 },
		{ 0x006B52A0, 39612 },
		{ 0x006B5450, 39614 },
		{ 0x006E6130, 40552 },
		{ 0x006E65C0, 40556 },
		{ 0x006E6620, 40557 },
		{ 0x00704970, 41257 },
		{ 0x007209A0, 41729 },
		{ 0x00720A30, 41730 },
		{ 0x00720BA0, 41735 },
		{ 0x00720BF0, 41736 },
		{ 0x00720C40, 41737 },
		{ 0x00720D60, 41738 },
		{ 0x00720DB0, 41739 },
		{ 0x00720E00, 41740 },
		{ 0x00720E90, 41741 },
		{ 0x00720F40, 41742 },
		{ 0x00720FB0, 41743 },
		{ 0x00721110, 41744 },
		{ 0x00721EF0, 41774 },
		{ 0x00721F10, 41775 },
		{ 0x008418D0, 49483 },
		{ 0x0084D630, 49908 },
		{ 0x00854E40, 50039 },
		{ 0x0085C2C0, 50180 },
		{ 0x0085F0C0, 50213 },
		{ 0x00864B00, 50310 },
		{ 0x00864C50, 50311 },
		{ 0x00864DA0, 50312 },
		{ 0x00864EF0, 50313 },
		{ 0x008663E0, 0 },
		{ 0x008664C0, 0 },
		{ 0x008667E0, 0 },
		{ 0x00867110, 0 },
		{ 0x00867730, 50335 },
		{ 0x0086F130, 50489 },
		{ 0x00870390, 50511 },
		{ 0x008704F0, 50512 },
		{ 0x00870700, 50513 },
		{ 0x00871700, 50528 },
		{ 0x00878850, 50650 },
		{ 0x00879770, 50657 },
		{ 0x00879B40, 50659 },
		{ 0x00887750, 50882 },
		{ 0x00887970, 50884 },
		{ 0x008879A0, 50885 },
		{ 0x00887D10, 50886 },
		{ 0x0089E730, 51176 },
		{ 0x008B40C0, 51521 },
		{ 0x008B5E20, 51534 },
		{ 0x0091C620, 53029 },
		{ 0x00920360, 53105 },
		{ 0x009247E0, 53136 },
		{ 0x009252C0, 53144 },
		{ 0x0092DAE0, 53228 },
		{ 0x0092EB50, 53234 },
		{ 0x0092FD80, 53242 },
		{ 0x00931470, 53257 },
		{ 0x00980190, 55141 },
		{ 0x00993100, 55616 },
		{ 0x009951F0, 55672 },
		{ 0x009AE5C0, 56227 },
		{ 0x00C02260, 66859 },
		{ 0x00C02560, 66861 },
		{ 0x00C064F0, 66963 },
		{ 0x00C06570, 66964 },
		{ 0x00C072D0, 66976 },
		{ 0x00C07350, 66977 },
		{ 0x00C07450, 66979 },
		{ 0x00C07540, 66981 },
		{ 0x00C07590, 66982 },
		{ 0x00C075A0, 66983 },
		{ 0x00C24750, 67673 },
		{ 0x00C249B0, 67677 },
		{ 0x00C25660, 67709 },
		{ 0x00C28BF0, 67819 },
		{ 0x00C28C80, 67820 },
		{ 0x00C28D40, 67822 },
		{ 0x00C28D60, 67823 },
		{ 0x00C28E20, 67824 },
		{ 0x00C52750, 68835 },
		{ 0x00C529A0, 68839 },
		{ 0x00C56B50, 68900 },
		{ 0x00C59690, 68971 },
		{ 0x00C598F0, 68972 },
		{ 0x00C59AE0, 68973 },
		{ 0x00C59EC0, 68978 },
		{ 0x00C59F10, 68979 },
		{ 0x00C66580, 69270 },
		{ 0x00C67490, 69284 },
		{ 0x00C68D20, 69335 },
		{ 0x00C6BC70, 69406 },
		{ 0x00C72180, 69562 },
		{ 0x00C76060, 69636 },
		{ 0x00C76340, 69638 },
		{ 0x00C76480, 69639 },
		{ 0x00C76490, 69640 },
		{ 0x00C764E0, 69641 },
		{ 0x00C76580, 69643 },
		{ 0x00C765C0, 69644 },
		{ 0x00C767B0, 69647 },
		{ 0x00C76820, 69648 },
		{ 0x00C7EB60, 69804 },
		{ 0x00D2ECA0, 74034 },
		{ 0x00D74B60, 75638 },
		{ 0x00EBE150, 79937 },
		{ 0x00EBF9C0, 79949 },
		{ 0x00EC30F0, 80059 },
		{ 0x00EC31D0, 80061 },
		{ 0x00ECD7F0, 80282 },
		{ 0x00ECD850, 80283 },
		{ 0x00ECD8A0, 80284 },
		{ 0x00ECD970, 80287 },
		{ 0x00ECDEE0, 80294 },
		{ 0x00ECDF50, 80295 },
		{ 0x00ECE010, 80298 },
		{ 0x00ECE0D0, 80300 },
		{ 0x00ECE790, 80302 },
		{ 0x00ED3A50, 80446 },
		{ 0x00ED6AC0, 80520 },
		{ 0x00F483C0, 82467 },
		{ 0x0122DAD0, 97379 },
		{ 0x01233670, 97462 },
		{ 0x01235F60, 97503 },
		{ 0x01236D10, 97508 },
		{ 0x01236E50, 97509 },
		{ 0x01237240, 97514 },
		{ 0x012385B0, 97537 },
		{ 0x0123C760, 97606 },
		{ 0x01241E40, 97723 },
		{ 0x01244970, 97745 },
		{ 0x012449D0, 97746 },
		{ 0x01250670, 97909 },
		{ 0x01250750, 97918 },
		{ 0x01250770, 97920 },
		{ 0x012507F0, 97923 },
		{ 0x01250C80, 97925 },
		{ 0x01250ED0, 97927 },
		{ 0x01291C30, 98893 },
		{ 0x01291D40, 98897 },
		{ 0x01295C30, 98986 },
		{ 0x012C56D0, 99862 },
		{ 0x012C5AB0, 99865 },
		{ 0x012C9320, 99886 },
		{ 0x012CEDE0, 100005 },
		{ 0x012CEF40, 100006 },
		{ 0x012CFBC0, 100016 },
		{ 0x012D01F0, 100022 },
		{ 0x012D0450, 0 },
		{ 0x012D1050, 100046 },
		{ 0x012D14F0, 100056 },
		{ 0x012D1990, 100066 },
		{ 0x012D1FB0, 100078 },
		{ 0x012D26F0, 100089 },
		{ 0x012D3B40, 100126 },
		{ 0x013120B0, 101030 },
		{ 0x01312120, 101031 },
		{ 0x01312180, 101033 },
		{ 0x013121B0, 101034 },
		{ 0x013121F0, 101036 },
		{ 0x0134BDB0, 102238 },
		{ 0x0152BF80, 229534 },
		{ 0x0152BFC0, 229536 },
		{ 0x0152BFE0, 229537 },
		{ 0x0152C040, 229540 },
		{ 0x0152C060, 229541 },
		{ 0x0152C0C0, 229544 },
		{ 0x0152C120, 229547 },
		{ 0x0152C160, 229549 },
		{ 0x0152C480, 229574 },
		{ 0x0152C9A0, 229615 },
		{ 0x0152CAE0, 229625 },
		{ 0x0152CB60, 229629 },
		{ 0x0152CBA0, 229631 },
		{ 0x0152F2E0, 229890 },
		{ 0x01544EA0, 0 },
		{ 0x01601508, 252391 },
		{ 0x01671ED0, 263295 },
		{ 0x01671EE8, 263296 },
		{ 0x01671F60, 263301 },
		{ 0x01671F78, 263302 },
		{ 0x01671F90, 263303 },
		{ 0x01671FA8, 263304 },
		{ 0x01671FC0, 263305 },
		{ 0x01671FD8, 263306 },
		{ 0x01671FF0, 263307 },
		{ 0x01672008, 263308 },
		{ 0x01672020, 263309 },
		{ 0x01672038, 263310 },
		{ 0x01672308, 263340 },
		{ 0x01672320, 263341 },
		{ 0x01766B50, 286151 },
		{ 0x0176B0B0, 286417 },
		{ 0x0176B240, 286420 },
		{ 0x0176D060, 286503 },
		{ 0x0176D5A0, 286517 },
		{ 0x01DB3ED8, 501262 },
		{ 0x01DB5E80, 501723 },
		{ 0x01DB8910, 501789 },
		{ 0x01DC6F60, 501797 },
		{ 0x01DD3EF8, 502260 },
		{ 0x01DD6210, 502301 },
		{ 0x01DF5430, 510469 },
		{ 0x01EBD280, 514110 },
		{ 0x01EBD710, 514113 },
		{ 0x01EBE418, 514139 },
		{ 0x01EBE428, 514141 },
		{ 0x01EBEABC, 514164 },
		{ 0x01EBEAE8, 514172 },
		{ 0x01EBEB20, 514178 },
		{ 0x01EBEB40, 514182 },
		{ 0x01EC0A70, 514285 },
		{ 0x01EC0A78, 514286 },
		{ 0x01EC3B78, 514315 },
		{ 0x01EC3CE0, 514355 },
		{ 0x02EC4838, 514494 },
		{ 0x02EC54D8, 514503 },
		{ 0x02EC58B0, 514622 },
		{ 0x02EC59B8, 514642 },
		{ 0x02EC5BD0, 514705 },
		{ 0x02EC5BD8, 514706 },
		{ 0x02EFF988, 514959 },
		{ 0x02F000F0, 515064 },
		{ 0x02F003F8, 515124 },
		{ 0x02F011D0, 515446 },
		{ 0x02F017E8, 515553 },
		{ 0x02F25250, 516458 },
		{ 0x02F257A0, 516573 },
		{ 0x02F257A8, 516574 },
		{ 0x02F26730, 516858 },
		{ 0x02F26740, 516860 },
		{ 0x02F26EF8, 517014 },
		{ 0x02F27180, 517051 },
		{ 0x02F38978, 517228 },
		{ 0x02F4C31C, 519394 },
		{ 0x02F4C328, 519396 },
		{ 0x02F4C910, 519579 },
		{ 0x02F4DED0, 519618 },
		{ 0x02F6B950, 523662 },
		{ 0x02F6BA48, 523673 },
		{ 0x030136C0, 523950 },
		{ 0x0301D758, 524557 },
		{ 0x03028490, 524907 },
		{ 0x0302BCC4, 524974 },
		{ 0x0302BCC8, 524975 },
		{ 0x03032C50, 525584 },
		{ 0x031D07A8, 527437 },
		{ 0x03497408, 528600 },
		{ 0x058FEAB4, 0 }
	});

	VersionDb GetDB();

	bool Initialize();
#ifdef _DEBUG
	void DumpDatabaseTextFile();
#endif

	template<typename T>
	T Get(uintptr_t id) {
		return reinterpret_cast<T>(GetDB().FindAddressById(id));
	}
	
	template<typename T>
	T GetVersionAddress(uintptr_t addr) {
		return Get<T>(addrMap.at(addr));
	}

	constexpr uintptr_t GetByVersionAddr(uintptr_t addr);
	uintptr_t GetVersionAddress(uintptr_t addr);
	uintptr_t GetOffset(uintptr_t id);
}
#endif